---
# preCICE Configuration Topology for Volume Coupled Flow Example
version: 1.0

configuration:
  type: precice
  dimensions: 2

logging:
  enabled: true
  filter: 
    severity: debug
    rank: 0
  format: "---[precice] %ColorizedSeverity% %Message%"

data:
  - name: Velocity
    type: vector

meshes:
  - name: Fluid-Mesh
    dimensions: 2
    data: 
      - Velocity

  - name: Source-Mesh
    dimensions: 2
    data: 
      - Velocity

participants:
  - name: Fluid
    provides_mesh: 
      - Fluid-Mesh
    receives_mesh:
      - name: Source-Mesh
        from: Source-Velocity
    mapping:
      - type: nearest-neighbor
        direction: read
        from_mesh: Source-Mesh
        to_mesh: Fluid-Mesh
        constraint: consistent
    reads_data:
      - name: Velocity
        mesh: Fluid-Mesh

  - name: Source-Velocity
    provides_mesh: 
      - Source-Mesh
    writes_data:
      - name: Velocity
        mesh: Source-Mesh

communication:
  type: sockets
  acceptor: Source-Velocity
  connector: Fluid
  exchange_directory: ..

coupling_scheme:
  type: serial-explicit
  time_window_size: 0.005
  max_time: 4.0
  participants:
    - first: Source-Velocity
    - second: Fluid
  data_exchange:
    - data: Velocity
      mesh: Source-Mesh
      from: Source-Velocity
      to: Fluid
